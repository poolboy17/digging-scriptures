---
/**
 * ================================================================================
 * SHARED SPOKE CARD — used by both HubLayout and CityLayout
 * ================================================================================
 * Renders a linked card for a spoke article with type badge, title,
 * description, optional meta line, and arrow.
 * ================================================================================
 */

interface Props {
    href: string;
    type: string;
    title: string;
    description?: string;
    meta?: string;
}

const { href, type, title, description, meta } = Astro.props;

const typeLabels: Record<string, string> = {
    'place': 'Sacred Place',
    'places': 'Sacred Place',
    'route': 'Pilgrimage Route',
    'routes': 'Pilgrimage Route',
    'story': 'Story',
    'stories': 'Story',
    'context': 'Context',
    'guide': 'Guide',
    'guides': 'Guide',
    'planning': 'Planning Guide',
    'walking': 'Walking Guide',
    'accommodation': 'Where to Stay',
    'etiquette': 'Etiquette & Access',
    'itinerary': 'Itinerary',
};

const label = typeLabels[type] || type;
---

<a href={href} class="spoke-card">
    <span class="spoke-card-type">{label}</span>
    <span class="spoke-card-title">{title}</span>
    {meta && <span class="spoke-card-meta">{meta}</span>}
    {description && <span class="spoke-card-desc">{description}</span>}
    <span class="spoke-card-arrow">→</span>
</a>

<style>
    .spoke-card {
        display: flex;
        flex-direction: column;
        padding: 1.25rem;
        border-radius: 0.75rem;
        border: 1px solid #e7e5e4;
        background: #fff;
        text-decoration: none;
        transition: border-color 0.2s, box-shadow 0.2s, transform 0.2s;
    }
    .spoke-card:hover {
        border-color: #6D28D9;
        box-shadow: 0 4px 14px rgba(109,40,217,0.1);
        transform: translateY(-2px);
    }
    .spoke-card-type {
        font-size: 0.68rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #6D28D9;
        margin-bottom: 0.3rem;
    }
    .spoke-card-title {
        font-weight: 600;
        color: #1c1917;
        font-size: 1rem;
        line-height: 1.3;
        margin-bottom: 0.3rem;
    }
    .spoke-card-meta {
        font-size: 0.78rem;
        color: #a8a29e;
        margin-bottom: 0.25rem;
    }
    .spoke-card-desc {
        font-size: 0.85rem;
        color: #78716c;
        line-height: 1.4;
        flex: 1;
        /* Clamp to 3 lines */
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .spoke-card-arrow {
        color: #6D28D9;
        font-weight: 600;
        margin-top: 0.5rem;
        font-size: 0.95rem;
    }
</style>
