@import 'tailwindcss';
@plugin '@tailwindcss/typography';

/* Override Tailwind's built-in .container utility.
   Un-layered CSS beats @layer utilities specificity. */
.container {
    max-width: 1080px;
    padding-inline: 1.25rem;
    margin-inline: auto;
}
@media (min-width: 48rem) {
    .container { padding-inline: 2rem; }
}

@theme {
    --font-sans: 'Inter Variable', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --font-serif: 'Source Serif 4 Variable', 'Georgia', 'Cambria', 'Times New Roman', serif;

    /* ── Liturgical palette ──
       Violet (royalty/penance) as dominant, Red as accent,
       White (purity), Green (growth), Black (solemnity)     */
    --color-primary: #6D28D9;          /* liturgical violet — royalty & penance */
    --color-primary-content: #faf5ff;
    --color-complementary: #ffffff;    /* liturgical white — purity & joy */
    --color-surface: #fdfcfe;          /* cool ivory with violet undertone */
    --color-accent: #991B1B;           /* liturgical red — blood & Spirit */
    --color-green: #166534;            /* liturgical green — growth & hope */
    --color-text-dark: #1c1917;        /* liturgical black — mourning & solemnity */
    --color-text-muted: #57534e;
    --color-text-light: #a8a29e;
    --color-border: #e9e5f0;
    --color-light: #f5f3f7;
}

@layer base {
    html {
        overflow-x: hidden;
    }

    body {
        @apply leading-relaxed;
        overflow-x: hidden;
    }

    h1 {
        @apply text-3xl font-bold tracking-tight leading-tight sm:text-4xl;
    }

    h2 {
        @apply text-2xl font-bold leading-tight sm:text-3xl;
    }

    h3 {
        @apply text-xl font-bold leading-tight;
    }

    a:not(.btn):not(.card) {
        @apply text-primary no-underline transition hover:text-text-dark;
    }

    img {
        @apply inline-block;
    }

    pre {
        @apply p-6 overflow-x-auto rounded-lg;
    }

    :not(pre) > code {
        @apply px-1 py-0.5 font-mono rounded bg-light text-primary;
        font-size: 0.9em;
    }
}

@layer components {
    .section {
        @apply py-16;
    }

    .page-heading {
        @apply mb-16 text-center font-bold leading-tight text-text-dark;
    }

    .page-heading:after {
        @apply mx-auto mt-4 block h-1 w-10 rounded-full bg-primary content-[''];
    }

    /* Card component for content listings */
    .card {
        @apply block rounded-xl overflow-hidden no-underline transition-all duration-300 bg-complementary border border-border;
    }

    .card:hover {
        @apply shadow-lg border-primary/30;
    }

    .card:hover img {
        @apply scale-[1.03];
    }

    .card img {
        @apply w-full object-cover transition-transform duration-300;
    }

    .card-body {
        @apply p-5;
    }

    .card-meta {
        @apply flex flex-wrap items-center gap-3 text-sm text-text-light mb-3;
    }

    .card-meta a {
        @apply font-medium hover:text-primary;
    }

    /* Rich article content with typography plugin */
    .content {
        @apply prose max-w-none;
        @apply prose-headings:font-bold prose-headings:text-text-dark;
        @apply prose-h1:text-3xl prose-h2:text-2xl prose-h3:text-xl;
        @apply prose-p:text-text-muted prose-p:leading-relaxed;
        @apply prose-a:text-primary prose-a:no-underline hover:prose-a:text-text-dark;
        @apply prose-blockquote:rounded-xl prose-blockquote:border-primary prose-blockquote:bg-light prose-blockquote:px-7 prose-blockquote:py-3;
        @apply prose-img:rounded-xl;
        @apply prose-strong:text-text-dark;
        @apply prose-li:text-text-muted;
    }

    /* Category/tag badges */
    .badge {
        @apply inline-block px-3 py-1 rounded-full text-xs font-medium bg-light text-text-muted transition-colors;
    }

    .badge:hover {
        @apply bg-primary text-primary-content;
    }

    .btn {
        @apply inline-flex items-center justify-center gap-2 bg-primary text-primary-content cursor-pointer text-center font-semibold no-underline transition-all rounded-lg shadow-sm;
        padding: 0.75rem 1.5rem;
        font-size: 0.875rem;
    }

    .btn:hover {
        @apply bg-accent shadow-md;
    }

    .btn:disabled {
        @apply text-text-light bg-surface cursor-not-allowed shadow-none;
    }

    .btn-outline {
        @apply inline-flex items-center justify-center gap-2 border-2 border-primary text-primary cursor-pointer text-center font-semibold no-underline transition-all rounded-lg bg-transparent;
        padding: 0.75rem 1.5rem;
        font-size: 0.875rem;
    }

    .btn-outline:hover {
        @apply bg-primary text-primary-content;
    }
}

/* ═══════════════════════════════════════════════════════════
   HUB LAYOUT STYLES — Editorial Cartography v3
   Warm, tactile, scholarly — the feel of a hand-bound atlas.
   Playfair Display serif, generous whitespace, warm stone tones.
   ═══════════════════════════════════════════════════════════ */

/* ── Progress Bar ── */
.progress-bar {
    position: fixed; top: 0; left: 0; height: 2px; width: 0;
    background: linear-gradient(90deg, var(--color-primary), #a78bfa);
    z-index: 200; transition: width 50ms;
}

/* ── Hero ── */
.hub-hero {
    position: relative; overflow: hidden;
    background: #1c1917;
    min-height: 340px; display: flex; align-items: flex-end;
}
@media (min-width: 640px) { .hub-hero { min-height: 420px; } }
@media (min-width: 1024px) { .hub-hero { min-height: 480px; } }

.hub-hero-img-wrap {
    position: absolute; inset: 0;
}
.hub-hero-img {
    width: 100%; height: 100%; object-fit: cover; object-position: center 40%;
}
.hub-hero-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(to top,
        rgba(10,8,6,0.95) 0%,
        rgba(10,8,6,0.72) 50%,
        rgba(10,8,6,0.35) 100%);
}

.hub-hero-inner {
    position: relative; z-index: 2;
    padding: 3rem 0 2.25rem;
    color: #fafaf9;
}
@media (min-width: 640px) { .hub-hero-inner { padding: 4rem 0 3rem; } }

.hub-hero-pattern {
    position: absolute; inset: 0; width: 100%; height: 100%;
    z-index: 1; pointer-events: none; opacity: 0.5;
}

.hub-hero-grain {
    position: absolute; inset: 0; z-index: 1; pointer-events: none;
    opacity: 0.035;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}
.hub-hero-fade {
    position: absolute; bottom: 0; left: 0; right: 0; height: 80px;
    background: linear-gradient(to top, var(--color-surface), transparent);
    z-index: 1;
}

.hub-hero-meta {
    display: flex; flex-wrap: wrap; align-items: center; gap: 0.75rem;
    margin-bottom: 1.25rem;
}
.hub-hero-badge {
    font-size: 0.6875rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.1em; color: #c4b5fd;
    background: rgba(109,40,217,0.2); padding: 0.3rem 0.875rem;
    border-radius: 2rem; border: 1px solid rgba(167,139,250,0.15);
}
.hub-hero-topics { display: flex; flex-wrap: wrap; gap: 0.375rem; }
.hub-hero-topic {
    font-size: 0.625rem; font-weight: 500; text-transform: uppercase;
    letter-spacing: 0.06em; color: #a8a29e;
    background: rgba(255,255,255,0.06); padding: 0.1875rem 0.5rem;
    border-radius: 0.25rem;
}

.hub-hero-title {
    font-family: var(--font-serif); font-size: clamp(1.75rem, 4.5vw, 3rem);
    font-weight: 800; line-height: 1.12; letter-spacing: -0.025em;
    margin-bottom: 0.875rem;
}
.hub-hero-desc {
    font-size: 0.9375rem; line-height: 1.75; color: #d6d3d1;
    max-width: 40rem; margin-bottom: 1.5rem;
}
@media (min-width: 640px) { .hub-hero-desc { font-size: 1.0625rem; } }

.hub-hero-stats {
    display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem;
    padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.08);
}
.hub-hero-stat {
    font-size: 0.8125rem; font-weight: 500; color: #a8a29e;
    font-variant-numeric: tabular-nums;
}
.hub-hero-stat-sep { color: #57534e; }

/* ── Spoke Preview Chips ── */
.spoke-preview {
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: 1.25rem 0;
}
.spoke-preview-label {
    font-size: 0.6875rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--color-text-light);
    margin-bottom: 0.75rem;
}
.spoke-preview-scroll {
    display: flex; flex-wrap: wrap; gap: 0.5rem;
}
.spoke-chip {
    display: inline-flex; align-items: center; gap: 0.375rem;
    padding: 0.375rem 0.75rem; background: var(--color-complementary);
    border: 1px solid var(--color-border); border-radius: 624rem;
    font-size: 0.8125rem; font-weight: 500; color: var(--color-text-muted);
    text-decoration: none; transition: all 0.2s ease; white-space: nowrap;
}
.spoke-chip:hover {
    border-color: var(--color-primary); color: var(--color-primary);
    background: color-mix(in srgb, var(--color-primary) 5%, white);
    transform: translateY(-1px);
}
.spoke-chip-icon { display: flex; align-items: center; color: var(--color-primary); opacity: 0.6; }
.spoke-chip-icon svg { width: 13px; height: 13px; }
.spoke-chip-text { line-height: 1.3; }

/* ── Mobile TOC ── */
.mobile-toc-wrapper {
    padding: 0.75rem 0; border-bottom: 1px solid var(--color-border);
}
@media (min-width: 1024px) { .mobile-toc-wrapper { display: none; } }
.mobile-toc-toggle {
    display: flex; align-items: center; justify-content: space-between;
    width: 100%; padding: 0.5rem 0; background: none; border: none;
    font-size: 0.8125rem; font-weight: 600; color: var(--color-text-dark);
    cursor: pointer;
}
.mobile-toc-chevron { transition: transform 0.2s; }
.mobile-toc-toggle[aria-expanded="true"] .mobile-toc-chevron {
    transform: rotate(180deg);
}
.mobile-toc-nav {
    display: none; padding-top: 0.5rem;
}
.mobile-toc-nav.open { display: block; }
.mobile-toc-nav a {
    display: block; padding: 0.375rem 0; font-size: 0.8125rem;
    color: var(--color-text-muted); text-decoration: none;
}
.mobile-toc-nav a:hover { color: var(--color-primary); }

/* ── Hub Article Layout ── */
.hub-article { padding: 2.5rem 0 5rem; }
.hub-layout {
    display: flex; flex-direction: column; gap: 2rem;
}
@media (min-width: 1024px) {
    .hub-layout { flex-direction: row; gap: 3.5rem; }
}

/* ── Desktop TOC Sidebar ── */
.hub-toc-wrapper {
    display: none;
}
@media (min-width: 1024px) {
    .hub-toc-wrapper {
        display: block; width: 220px; flex-shrink: 0;
        position: sticky; top: 5rem; align-self: flex-start;
        max-height: calc(100vh - 6rem); overflow-y: auto;
    }
}
.hub-toc-label {
    font-size: 0.6875rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--color-text-light);
    margin-bottom: 0.75rem;
}
.hub-toc a {
    display: block; padding: 0.3125rem 0; font-size: 0.8125rem;
    color: var(--color-text-muted); text-decoration: none;
    border-left: 2px solid transparent; padding-left: 0.75rem;
    transition: all 0.15s;
}
.hub-toc a:hover { color: var(--color-primary); border-left-color: var(--color-primary); }
.hub-toc a.active { color: var(--color-primary); border-left-color: var(--color-primary); font-weight: 600; }

.hub-toc-links { display: flex; flex-direction: column; }

.hub-content { flex: 1; min-width: 0; }

/* ── Spoke Cards Section ── */
.hub-spokes-section {
    padding: 3rem 0;
    border-top: 1px solid var(--color-border);
}
.hub-spokes-section:first-of-type {
    margin-top: 1rem;
}
.hub-spokes-heading {
    display: flex; align-items: center; gap: 0.5rem;
    font-size: 0.75rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--color-text-light);
    margin-bottom: 1.25rem;
}
.hub-spokes-icon { display: flex; align-items: center; color: var(--color-primary); opacity: 0.6; }
.hub-spokes-icon svg { width: 16px; height: 16px; }

.hub-spokes-grid {
    display: grid; gap: 1rem;
}
@media (min-width: 640px) { .hub-spokes-grid { grid-template-columns: repeat(2, 1fr); } }

/* Spoke Cards */
.hub-spoke-card {
    display: flex; flex-direction: column;
    padding: 1.25rem 1.375rem;
    background: var(--color-complementary);
    border: 1px solid var(--color-border); border-radius: 0.75rem;
    text-decoration: none; transition: all 0.25s ease;
    position: relative;
}
.hub-spoke-card:hover {
    border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
    box-shadow: 0 4px 20px rgba(109,40,217,0.06);
    transform: translateY(-2px);
}
.hub-spoke-type {
    font-size: 0.6875rem; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.06em; color: var(--color-primary); opacity: 0.7;
    margin-bottom: 0.375rem;
}
.hub-spoke-title {
    font-family: var(--font-serif); font-size: 1.0625rem; font-weight: 700;
    color: var(--color-text-dark); line-height: 1.3;
    margin-bottom: 0.5rem;
}
.hub-spoke-desc {
    font-size: 0.8125rem; line-height: 1.6; color: var(--color-text-muted);
    flex: 1;
    display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;
    overflow: hidden;
}
.hub-spoke-arrow {
    display: inline-flex; align-items: center;
    margin-top: 0.875rem; font-size: 0.8125rem; font-weight: 600;
    color: var(--color-primary); opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
}
.hub-spoke-card:hover .hub-spoke-arrow {
    opacity: 1; transform: translateX(3px);
}

/* Entrance animation for spoke cards */
@keyframes spokeCardIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}
.hub-spoke-card {
    animation: spokeCardIn 0.4s ease both;
}

/* ── Further Reading (Stories + Context) ── */
.hub-further-list {
    display: flex; flex-direction: column; gap: 0;
}
.hub-further-link {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.875rem 0;
    text-decoration: none; transition: all 0.15s;
    border-bottom: 1px solid var(--color-border);
}
.hub-further-link:last-child { border-bottom: none; }
.hub-further-link:hover {
    padding-left: 0.5rem;
}
.hub-further-link .badge {
    flex-shrink: 0; font-size: 0.625rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.04em;
    padding: 0.25rem 0.625rem; border-radius: 0.25rem;
    background: var(--color-light); color: var(--color-text-light);
}
.hub-further-title {
    flex: 1; font-size: 0.9375rem; font-weight: 600;
    color: var(--color-text-dark); line-height: 1.4;
}
.hub-further-link:hover .hub-further-title {
    color: var(--color-primary);
}
.hub-further-arrow {
    flex-shrink: 0; font-size: 0.875rem; color: var(--color-text-light);
    transition: transform 0.2s, color 0.2s;
}
.hub-further-link:hover .hub-further-arrow {
    transform: translateX(3px); color: var(--color-primary);
}

/* ── Sibling Hubs ── */
.sibling-section {
    padding: 3.5rem 0;
    background: var(--color-light);
    border-top: 1px solid var(--color-border);
}
.sibling-label {
    font-size: 0.6875rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--color-text-light);
    margin-bottom: 1.25rem; text-align: center;
}
.sibling-grid {
    display: grid; gap: 1rem;
}
@media (min-width: 640px) { .sibling-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 900px) { .sibling-grid { grid-template-columns: repeat(4, 1fr); } }

.sibling-card {
    display: flex; flex-direction: column;
    padding: 1.25rem; background: var(--color-complementary);
    border: 1px solid var(--color-border); border-radius: 0.75rem;
    text-decoration: none; transition: all 0.25s ease;
}
.sibling-card:hover {
    border-color: color-mix(in srgb, var(--color-primary) 40%, var(--color-border));
    box-shadow: 0 4px 16px rgba(109,40,217,0.05);
    transform: translateY(-2px);
}
.sibling-title {
    font-family: var(--font-serif); font-size: 0.9375rem; font-weight: 700;
    color: var(--color-text-dark); line-height: 1.3;
    margin-bottom: 0.375rem;
}
.sibling-desc {
    font-size: 0.75rem; line-height: 1.6; color: var(--color-text-muted);
    flex: 1;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
    overflow: hidden;
}
.sibling-arrow {
    display: inline-block; margin-top: 0.75rem;
    font-size: 0.8125rem; font-weight: 600; color: var(--color-primary);
    opacity: 0; transition: opacity 0.2s, transform 0.2s;
}
.sibling-card:hover .sibling-arrow {
    opacity: 1; transform: translateX(3px);
}

/* ── Continue Exploring ── */
.continue-section {
    padding: 3.5rem 0 4.5rem;
    border-top: 1px solid var(--color-border);
}
.continue-inner { text-align: center; }
.continue-heading {
    font-family: var(--font-serif);
    font-size: 1.375rem; font-weight: 800; color: var(--color-text-dark);
    margin-bottom: 0.5rem;
}
.continue-text {
    font-size: 0.875rem; color: var(--color-text-muted); margin-bottom: 1.75rem;
}
.continue-links {
    display: flex; flex-wrap: wrap; justify-content: center; gap: 0.625rem;
}
.continue-link {
    display: inline-flex; align-items: center; gap: 0.375rem;
    padding: 0.5rem 1.125rem; background: var(--color-complementary);
    border: 1px solid var(--color-border); border-radius: 2rem;
    font-size: 0.8125rem; font-weight: 500; color: var(--color-text-muted);
    text-decoration: none; transition: all 0.2s ease;
}
.continue-link svg { width: 14px; height: 14px; opacity: 0.5; }
.continue-link:hover {
    border-color: var(--color-primary); color: var(--color-primary);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(109,40,217,0.08);
}
.continue-link:hover svg { opacity: 1; }
