---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const places = await getCollection('places', ({ data }) => !data.draft);
---

<BaseLayout 
    title="Sacred Places" 
    description="Discover sacred sites, shrines, temples, and pilgrimage destinations around the world."
    breadcrumbs={[
        { name: 'Home', url: '/' },
        { name: 'Sacred Places', url: '/places' }
    ]}
>
    <section class="section">
        <div class="container">
            <h1 class="page-heading">Sacred Places</h1>

            {places.length > 0 ? (
                <div class="grid gap-8 sm:grid-cols-2">
                    {places.map((place) => (
                        <a href={`/places/${place.slug}`} class="card block">
                            <div class="overflow-hidden rounded-lg">
                                <img 
                                    src={place.data.image || '/images/posts/pilgrimage-default.svg'} 
                                    alt={place.data.title}
                                    width="445" height="230"
                                    class="w-full aspect-[445/230] object-cover" loading="lazy" decoding="async"
                                />
                            </div>
                            <div class="pt-4">
                                <div class="card-meta">
                                    <span class="badge">Place</span>
                                    <span>{place.data.region} Â· {place.data.country}</span>
                                </div>
                                <h3 class="mb-2 text-text-dark">{place.data.title}</h3>
                                <p class="text-sm text-text-muted leading-relaxed line-clamp-2">{place.data.description}</p>
                            </div>
                        </a>
                    ))}
                </div>
            ) : (
                <p class="text-center text-text-muted italic">Content coming soon.</p>
            )}
        </div>
    </section>
</BaseLayout>
