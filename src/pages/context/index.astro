---
/**
 * ================================================================================
 * CONTEXT INDEX: /context
 * ================================================================================
 * Lists all context pages
 * ================================================================================
 */

import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const contextArticles = await getCollection('context', ({ data }) => !data.draft);
---

<BaseLayout 
    title="Background and Context" 
    description="Historical and cultural background for understanding pilgrimage traditions."
    breadcrumbs={[
        { name: 'Home', url: '/' },
        { name: 'Context', url: '/context' }
    ]}
>
    <section class="mb-12">
        <h1 class="mb-4">Background and Context</h1>
        <p class="text-lg text-text-muted leading-relaxed">Historical and cultural background for understanding pilgrimage traditions.</p>
    </section>

    {contextArticles.length > 0 ? (
        <ul class="space-y-4">
            {contextArticles.map((article) => (
                <li>
                    <a href={`/context/${article.slug}`} class="text-primary text-lg">{article.data.title}</a>
                    <p class="text-text-light text-sm mt-1">{article.data.contextType.replace('-', ' ')}</p>
                    <p class="text-text-muted text-sm">{article.data.description}</p>
                </li>
            ))}
        </ul>
    ) : (
        <p class="text-text-light italic">Content coming soon. Check back for historical and cultural context on pilgrimage traditions.</p>
    )}
</BaseLayout>
