---
/**
 * ================================================================================
 * CONTEXT PAGE TEMPLATE
 * ================================================================================
 * Purpose: Historical and cultural background articles
 * Word count target: 1000-2000 words
 * 
 * MONETIZATION: NEVER
 * This is purely educational content. No exceptions.
 * 
 * This template is LOCKED. Do not modify section order without review.
 * ================================================================================
 */

import BaseLayout from './BaseLayout.astro';
import CdnImage from '../components/CdnImage.astro';
import SpokeSidebar from '../components/SpokeSidebar.astro';
import SpokeMobileToc from '../components/SpokeMobileToc.astro';

interface Props {
    title: string;
    description: string;
    contextType: string;
    faithTraditions?: string[];
    regions?: string[];
    image?: string;
    imageAlt?: string;
    imageCredit?: string;
}

const { 
    title, 
    description, 
    contextType,
    faithTraditions,
    regions,
    image,
    imageAlt,
    imageCredit,
} = Astro.props;
---

<BaseLayout title={title} description={description}>
    <SpokeMobileToc />
    <article class="context-page">
    <div class="spoke-layout container">
    <div class="spoke-main">
        
        <!-- HERO IMAGE -->
        {image && (
            <div style="max-width:900px;margin:0 auto 2rem;border-radius:0.75rem;overflow:hidden;">
                <CdnImage src={image} alt={imageAlt || title} loading="eager" fetchpriority="high" width={1080} height={720} sizes="(max-width: 1080px) 100vw, 1080px" class="w-full object-cover rounded-xl" style="max-height:420px;" />
                {imageCredit && <p style="font-size:0.75rem;color:#a8a29e;margin-top:0.5rem;">{imageCredit}</p>}
            </div>
        )}

        <!-- SECTION 1: HEADER -->
        <header class="context-header">
            <h1>{title}</h1>
            <p class="context-type">{contextType.replace('-', ' ')}</p>
            <p class="context-description">{description}</p>
        </header>

        <!-- ================================================================== -->
        <!-- SECTION 2: MAIN CONTENT -->
        <!-- Purpose: Educational background information -->
        <!-- Monetization: FORBIDDEN -->
        <!-- Content: Factual, balanced, non-doctrinal -->
        <!-- ================================================================== -->
        <section class="context-content">
            {faithTraditions && faithTraditions.length > 0 && (
                <p class="faith-traditions">
                    Related traditions: {faithTraditions.join(', ')}
                </p>
            )}
            {regions && regions.length > 0 && (
                <p class="regions">
                    Regions covered: {regions.join(', ')}
                </p>
            )}
            <slot />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 3: KEY CONCEPTS -->
        <!-- Purpose: Definitions and explanations -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="context-concepts">
            <h2>Key Concepts</h2>
            <slot name="concepts" />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 4: FURTHER READING -->
        <!-- Purpose: Academic and authoritative sources -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="context-sources">
            <h2>Further Reading</h2>
            <slot name="sources" />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 5: RELATED CONTENT -->
        <!-- Purpose: Internal linking to related pages -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="context-related">
            <h2>Related Content</h2>
            <slot name="related" />
        </section>

    </div>
    <SpokeSidebar />
    </div>
    </article>
</BaseLayout>
