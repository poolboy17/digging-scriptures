---
/**
 * ================================================================================
 * STORY PAGE TEMPLATE
 * ================================================================================
 * Purpose: People, traditions, cultural narratives
 * Word count target: 1000-2000 words
 * 
 * MONETIZATION: NO (by default)
 * 
 * This template is LOCKED. Do not modify section order without review.
 * ================================================================================
 */

import BaseLayout from './BaseLayout.astro';
import CdnImage from '../components/CdnImage.astro';

interface Props {
    title: string;
    description: string;
    storyType: string;
    faithTraditions?: string[];
    timePeriod?: string;
    image?: string;
    imageAlt?: string;
    imageCredit?: string;
}

const { 
    title, 
    description, 
    storyType,
    faithTraditions,
    timePeriod,
    image,
    imageAlt,
    imageCredit,
} = Astro.props;
---

<BaseLayout title={title} description={description}>
    <article class="story-page">
        
        <!-- HERO IMAGE -->
        {image && (
            <div class="hero-image mb-8 rounded-xl overflow-hidden" style="max-width:900px;margin:0 auto 2rem;">
                <CdnImage src={image} alt={imageAlt || title} loading="eager" fetchpriority="high" width={1080} height={720} sizes="(max-width: 1080px) 100vw, 1080px" class="w-full object-cover rounded-xl" style="max-height:420px;" />
                {imageCredit && <p style="font-size:0.75rem;color:#a8a29e;margin-top:0.5rem;">{imageCredit}</p>}
            </div>
        )}

        <!-- SECTION 1: HEADER -->
        <header class="story-header">
            <h1>{title}</h1>
            <p class="story-type">{storyType.replace('-', ' ')}</p>
            {timePeriod && (
                <p class="story-period">Time period: {timePeriod}</p>
            )}
            <p class="story-description">{description}</p>
        </header>

        <!-- ================================================================== -->
        <!-- SECTION 2: THE NARRATIVE -->
        <!-- Purpose: Main story content -->
        <!-- Monetization: FORBIDDEN -->
        <!-- Content: Descriptive, respectful, culturally sensitive -->
        <!-- ================================================================== -->
        <section class="story-narrative">
            {faithTraditions && faithTraditions.length > 0 && (
                <p class="faith-traditions">
                    Associated traditions: {faithTraditions.join(', ')}
                </p>
            )}
            <slot name="narrative" />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 3: HISTORICAL CONTEXT -->
        <!-- Purpose: Background and historical setting -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="story-context">
            <h2>Historical Context</h2>
            <slot name="context" />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 4: LEGACY AND SIGNIFICANCE -->
        <!-- Purpose: Impact and continuing relevance -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="story-legacy">
            <h2>Legacy and Significance</h2>
            <slot name="legacy" />
        </section>

        <!-- ================================================================== -->
        <!-- SECTION 5: RELATED CONTENT -->
        <!-- Purpose: Internal linking to related pages -->
        <!-- Monetization: FORBIDDEN -->
        <!-- ================================================================== -->
        <section class="story-related">
            <h2>Related Content</h2>
            <slot name="related" />
        </section>

    </article>
</BaseLayout>
